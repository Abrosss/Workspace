<%- include('../layout/header.html'); %>
<div class="page-flex workspace-page">
  <!-- ! Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-start">
        <div class="sidebar-head">
            <a href="/home" class="logo-wrapper" title="Home">
                <span class="sr-only">Home</span>
                <div class="logo-text">
                  <span class="logo-title">Workspace</span>
                  <span class="logo-subtitle">Fix & Learn</span>
              </div>

            </a>
            <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
                <span class="sr-only">Toggle menu</span>
                <span class="icon menu-toggle" aria-hidden="true"></span>
            </button>
        </div>
        <div class="sidebar-body">
      <ul class="sidebar-body-menu">
        <div class="sub-projects hidden">
        <li>
          <a href="/home"><span class="icon home" aria-hidden="true"></span>Dashboard</a>
      </li>
        <li>
          
              <span class="projects-sidebar-item opacity">
              <div class="d-flex align-items-center">
              <span class="icon document" aria-hidden="true"></span>
              Projects
              </div>
              <a class="expand-link" href="/projects"><span class="icon expand" aria-hidden="true"></span></a>
            </span>
          
          <ul class="sublist-sidebar">
            <% projects.forEach(project =>{ %>
            <li class="sidebar-subitem project-item" data-id="<%=project._id%>" data-name="<%=project.title%>">
               <%=project.title%>
                
                <ul class="sublist-sidebar-tasks">
                  <% project.tickets.forEach(ticket =>{ %>
                  <li><a href="#"><%=ticket.title%></a></li>
                  <% })%>
                </ul>
                <% })%>
            </li>
           
        </ul>
      </li>
    </div>
      <li class="sub-tasks show">
        
        <% projects.forEach(project =>{ %>
          <% if (id == project._id) { %>
        <a class="opacity"><div class="back-icon-container"><span class="icon arrow-left back-icon" aria-hidden="true"></span></div><span class="active-project"><%=project.title%></span></a>
    
          <ul class="sublist-sidebar-tickets">
            
            <% project.tickets.forEach(ticket =>{ %>
              <% if (ticketId == ticket._id) { %>
              <li class="sidebar-subitem task-item active center"><a href="/projects/<%=ticket.projectId%>/<%=ticket._id%>"><%=ticket.title%></a></li>
              <% } else {%>
                <li class="sidebar-subitem task-item center"><a href="/projects/<%=ticket.projectId%>/<%=ticket._id%>"><%=ticket.title%></a></li>
                <% } %>
              <% })%>
           
          </ul>
          <% } %>
          <% })%>
      </li>
     
  </ul>
    </li>
              
            </ul>
            
              
           
         
        </div>
    </div>
    <div class="sidebar-footer">
      <ul class="sidebar-body-menu">
     
        <li>
            <a href="/settings"><span class="icon setting" aria-hidden="true"></span>Settings</a>
        </li>
    </ul>
    </div>
</aside>
  <div class="main-wrapper">
    <!-- ! Main nav -->
    <nav class="main-nav--bg">
  <div class="container main-nav">
    <div class="main-nav-start">
      <div class="search-wrapper">
        <i data-feather="search" aria-hidden="true"></i>
        <input type="text" id="search" placeholder="Search for projects..." autocomplete="off" required>
        <ul class="suggestions">
        
        </ul>
      </div>
      
    </div>
    <div class="main-nav-end">
      <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
        <span class="sr-only">Toggle menu</span>
        <span class="icon menu-toggle--gray" aria-hidden="true"></span>
      </button>
     
      <div class="d-flex gap-1">
        <button class="theme-switcher gray-circle-btn" type="button" title="Switch theme">
          <span class="sr-only">Switch theme</span>
          <i class="sun-icon" data-feather="sun" aria-hidden="true"></i>
          <i class="moon-icon" data-feather="moon" aria-hidden="true"></i>
        </button>
       
        <div class="nav-user-wrapper">
          <button href="##" class="nav-user-btn dropdown-btn" title="My profile" type="button">
            <span class="sr-only">My profile</span>
            <span class="nav-user-img">
              <picture><source srcset="/img/avatar/avatar-illustrated-02.webp" type="image/webp"><img src="/img/avatar/avatar-illustrated-02.png" alt="User name"></picture>
            </span>
          </button>
          <ul class="tasks-item-dropdown nav-user-dropdown dropdown">
            <li><a href="##">
                <i data-feather="user" aria-hidden="true"></i>
                <span>Profile</span>
              </a></li>
            <li><a href="/settings">
                <i data-feather="settings" aria-hidden="true"></i>
                <span>Account settings</span>
              </a></li>
            <li><a class="danger" href="/users/logout">
                <i data-feather="log-out" aria-hidden="true"></i>
                <span>Log out</span>
              </a></li>
          </ul>
        </div>
        </div>
    </div>
  </div>
</nav>
    <!-- ! Main -->
    <main class="main tasks" id="skip-target">
      <div class="container">
        <section class="row full-height">
          <section class="notes-section">
            <div class="notes-header project-header" >
              <div class="note-name">
              <span class="badge-success badge-task">TASK</span>
              <% ticket.forEach(ticket =>{ %>
              <h2><%=ticket.title.toUpperCase()%></h2>
            
            </div>
            <p>from <a class="italic underline" href="/projects/<%=ticket.projectId._id%>"><%=ticket.projectId.title%></a></p>
             
              <div class="note-input mt-5">
              <form action="/api/<%=ticket._id%>/addTask" method="POST" autocomplete="off">
                <input type="text" placeholder="Add a task.." name="note">
              </form>
             
            </div>
            </div>
            <div class="notes-container">
              <% ticket.notes.forEach(note =>{ %>
              <div class="note-item">
                <p><%=note.content%></p>
              </div>
              <% })%>
            </div>
             <% })%>
            <div class="mark-button">
              <a class="btn btn-success" href="#">MARK COMPLETED</a>
            </div>
          </section>
          
        </section>
        <section id="bookmarks" class="workspace hidden">
          <div class="bookmarks-body">
          <div class="bookmarks-header justify-content-end">
            <span class="close icon cross"></span>
          </div>
          <div class="bookmarks-header">
            <h6 class="workspace">How to connect Mongoose to Node Js</h6>
          </div>
        
          <div class="bookmarks-container">
          <div class="bookmark-item workspace">
            <span class="icon circle"></span>
            <p>npm install</p>
            
          </div>
          <div class="bookmark-item workspace">
            <span class="icon circle"></span>
            <p>connect to database</p>
            
          </div>
         
        </div>
      </div>
        <div class="save-button">
          <a class="btn btn-success" href="#">SAVE TO DASHBOARD</a>
        </div>
        </section>
        <div id = "bookmarks-hidden" class="true">
          <span class="icon bookmark"></span>
        </div>
       
        </div>
       
      
    </main>
    <!-- ! Footer -->
    <footer class="footer">
      <div class="container footer--flex">
        <div class="footer-start">
          <p>2022 Â© Workspace</p>
        </div>
        <ul class="footer-end">
          <li><a href="##">About</a></li>
          <li><a href="##">Support</a></li>
      
        </ul>
      </div>
    </footer>
  </div>

  <%- include('../layout/footer.html'); %>